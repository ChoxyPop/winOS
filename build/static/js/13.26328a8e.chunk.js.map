{"version":3,"sources":["apps/mediaplayer/assets/media.png","apps/mediaplayer/MediaMenuBar.tsx","apps/mediaplayer/MediaPlayerWindow.tsx","apps/mediaplayer/index.tsx","misc/hooks/useUuid.tsx","widgets/menubar/MenuBar.tsx","misc/openDropdownMenu.tsx","widgets/menubar/MenuBarMenu.tsx"],"names":["module","exports","MediaMenuBar","window","useContext","WindowContext","MenuBar","MenuBarMenu","label","onClick","destroy","MediaPlayerWindow","path","fileSystem","OSContext","useState","src","setSrc","videoRef","useRef","useEffect","data","readFileSync","blob","Blob","type","url","URL","createObjectURL","revokeObjectURL","err","console","error","style","display","flexDirection","height","ref","controls","autoPlay","flexGrow","width","background","padding","MediaPlayerApp","args","a","nodePath","BFSRequire","fileName","basename","windowSize","Math","min","innerWidth","innerHeight","this","os","windowManager","create","title","metadata","name","icon","rect","left","max","top","minSize","body","fileExtensions","useUuid","uuidv4","current","styled","children","rest","activeMenu","setActiveMenu","menuId","childrenWithProps","React","Children","map","child","id","props","cloneElement","active","onMouseDown","e","openDropdownMenu","mouseDown","onMouseOver","mouseOver","stopPropagation","onMenuHidden","Anchors","Center","x","y","TopLeft","TopRight","BottomRight","BottomLeft","event","anchor","buttonRect","currentTarget","getBoundingClientRect","clientX","clientY","eventManager","emit","DISPLAY_MENU","StyledMenuBarMenu","div","Fragment","className","classNames","onHidden"],"mappings":"kFAAAA,EAAOC,QAAU,skK,oNCMJC,EAAe,WAC1B,IAAMC,EAASC,qBAAWC,KAE1B,OACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAaC,MAAM,QACjB,kBAAC,OAAD,gBACA,kBAAC,YAAD,MACA,kBAAC,OAAD,CAAMC,QAAS,kBAAMN,EAAOO,YAA5B,SAGF,kBAACH,EAAA,EAAD,CAAaC,MAAM,YACjB,kBAAC,OAAD,aACA,kBAAC,OAAD,cACA,kBAAC,OAAD,cAGF,kBAACD,EAAA,EAAD,CAAaC,MAAM,QACjB,kBAAC,OAAD,8BChBKG,EAAgD,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACtDC,EAAeT,qBAAWU,KAA1BD,WADiE,EAEnDE,mBAAwB,MAF2B,mBAElEC,EAFkE,KAE7DC,EAF6D,KAGnEC,EAAWC,iBAAyB,MAkB1C,OAhBAC,qBAAU,WACR,IACE,IAAMC,EAAOR,EAAWS,aAAaV,GAC/BW,EAAO,IAAIC,KAAK,CAACH,GAAO,CAAEI,KAAM,cAChCC,EAAMC,IAAIC,gBAAgBL,GAGhC,OAFAN,EAAOS,GAEA,WACLC,IAAIE,gBAAgBH,IAEtB,MAAOI,GACPC,QAAQC,MAAM,sBAAuBF,GACrCb,EAAO,SAER,CAACL,IAGF,yBAAKqB,MAAO,CAAEC,QAAS,OAAQC,cAAe,SAAUC,OAAQ,SAC9D,kBAAC,EAAD,MACCpB,EACC,2BACEqB,IAAKnB,EACLF,IAAKA,EACLsB,UAAQ,EACRC,UAAQ,EACRN,MAAO,CAAEO,SAAU,EAAGC,MAAO,OAAQC,WAAY,WAGnD,yBAAKT,MAAO,CAAEU,QAAS,KAAvB,gCCnCKC,EAAuB,uCAAG,WAAgBC,GAAhB,yBAAAC,EAAA,oEACFD,EADE,UAC9BjC,OAD8B,MACvB,kBADuB,EAE/BmC,EAAWC,qBAAW,QACtBC,EAAWF,EAASG,SAAStC,GAE7BuC,EAAa,CACjBV,MAAOW,KAAKC,IAAIlD,OAAOmD,WAAY,KACnClB,OAAQgB,KAAKC,IAAIlD,OAAOoD,YAAa,MAGvCC,KAAKC,GAAGC,cAAcC,OAAO,CAC3BC,MAAM,GAAD,OAAKX,GAAY,WAAjB,cAAiCL,EAAeiB,SAASC,MAC9DC,KAAMnB,EAAeiB,SAASE,KAC9BC,KAAK,aACHC,KAAMb,KAAKc,IAAI,EAAuB,GAApB/D,OAAOmD,WAAmBH,EAAWV,MAAQ,GAC/D0B,IAAKf,KAAKc,IAAI,EAAwB,GAArB/D,OAAOoD,YAAoBJ,EAAWf,OAAS,IAC7De,GAELiB,QAAS,CACP3B,MAAO,IACPL,OAAQ,KAEViC,KAAM,kBAAC,EAAD,CAAmBzD,KAAMA,MAtBI,gDAAH,sDA0BpCgC,EAAeiB,SAAW,CACxBC,KAAM,eACNC,SACAO,eAAgB,CACd,OAAQP,IACR,OAAQA,O,gCCrCZ,sDAGO,SAASQ,IACd,OAAOpD,iBAAeqD,eAAUC,U,6HCoDrBnE,EAAUoE,aAtCe,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,SAAaC,EAAyB,8BACzC7D,mBAAwB,MADiB,mBACtE8D,EADsE,KAC1DC,EAD0D,KAEvEC,EAASR,cAoBf,IAAMS,EAAoBC,IAAMC,SAASC,IAAIR,GAAU,SAAAS,GACrD,IAAMC,EAAKN,EAAS,KAAOK,EAAME,MAAMD,IAAMD,EAAME,MAAM9E,OAEzD,OAAOyE,IAAMM,aAAaH,EAAO,CAC/BI,OAAQX,IAAeQ,EACvBA,KACAI,YAAa,SAACC,GAAD,OAxBjB,SAAmBL,EAAYK,GACzBb,IAAeQ,IAEnBP,EAAcO,GACdM,YAAiBN,EAAIK,IAoBmBE,CAAUP,EAAIK,IACpDG,YAAa,SAACH,GAAD,OAlBjB,SAAmBL,EAAYK,GACV,OAAfb,GAAuBA,IAAeQ,IACxCP,EAAcO,GACdM,YAAiBN,EAAIK,IAeiBI,CAAUT,EAAIK,IACpDjF,QAAS,SAACiF,GAAD,OAAyBA,EAAEK,mBACpCC,aAAc,kBAblB,SAAsBX,GAChBR,IAAeQ,GAAIP,EAAc,MAYfkB,CAAaX,SAIrC,OAAO,wBAAST,EAAOI,MAGL,0DAAGN,CAAH,wH,gCCvDpB,sDAQauB,EAA+C,CAC1DC,OAAQ,CAAEC,EAAG,GAAKC,EAAG,IACrBC,QAAS,CAAEF,EAAG,EAAGC,EAAG,GACpBE,SAAU,CAAEH,EAAG,EAAGC,EAAG,GACrBG,YAAa,CAAEJ,EAAG,EAAGC,EAAG,GACxBI,WAAY,CAAEL,EAAG,EAAGC,EAAG,IAGlB,SAAST,EACdN,EACAoB,GAEC,IADDC,EACA,uDADiBT,EAAQO,WAEnBG,EAAcF,EAAMG,cAA0BC,wBACpDJ,EAAMK,QAAUH,EAAW1C,KAAO0C,EAAWlE,MAAQiE,EAAOP,EAC5DM,EAAMM,QAAUJ,EAAWxC,IAAMwC,EAAWvE,OAASsE,EAAON,EAAI,EAGhEY,eAAaC,KAAKC,uBAAa7B,GAAKoB,K,8HCtBhCU,EAAoBzC,IAAO0C,IAAV,iFAAG1C,CAAH,gIAuBVnE,EAAmC,SAAC,GAO1C,IANLiF,EAMI,EANJA,OACAhF,EAKI,EALJA,MACA6E,EAII,EAJJA,GACAV,EAGI,EAHJA,SACAqB,EAEI,EAFJA,aACGpB,EACC,iEACJ,OACE,kBAAC,IAAMyC,SAAP,KACE,kBAACF,EAAD,eAAmBG,UAAWC,IAAW,CAAE/B,YAAeZ,GACvDpE,GAGH,kBAAC,OAAD,CAAM6E,GAAIA,GAAM7E,EAAOgH,SAAUxB,GAC9BrB,GAAY","file":"static/js/13.26328a8e.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import React, { useContext } from 'react';\nimport { MenuBar } from '../../widgets/menubar/MenuBar';\nimport { Item, Separator } from 'react-contexify';\nimport { WindowContext } from '../../windows/WindowManager';\nimport { MenuBarMenu } from '../../widgets/menubar/MenuBarMenu';\n\nexport const MediaMenuBar = () => {\n  const window = useContext(WindowContext)!;\n\n  return (\n    <MenuBar>\n      <MenuBarMenu label=\"File\">\n        <Item>Open...</Item>\n        <Separator />\n        <Item onClick={() => window.destroy()}>Exit</Item>\n      </MenuBarMenu>\n\n      <MenuBarMenu label=\"Playback\">\n        <Item>Play</Item>\n        <Item>Pause</Item>\n        <Item>Stop</Item>\n      </MenuBarMenu>\n\n      <MenuBarMenu label=\"Help\">\n        <Item>About Media Player</Item>\n      </MenuBarMenu>\n    </MenuBar>\n  );\n};\n","import React, { FC, useContext, useEffect, useRef, useState } from 'react';\nimport { OSContext } from '../../App';\nimport { MediaMenuBar } from './MediaMenuBar';\n\nexport interface MediaPlayerWindowProps {\n  path: string;\n}\n\nexport const MediaPlayerWindow: FC<MediaPlayerWindowProps> = ({ path }) => {\n  const { fileSystem } = useContext(OSContext)!;\n  const [src, setSrc] = useState<string | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    try {\n      const data = fileSystem.readFileSync(path);\n      const blob = new Blob([data], { type: 'video/mp4' }); // también puede ser video/avi\n      const url = URL.createObjectURL(blob);\n      setSrc(url);\n\n      return () => {\n        URL.revokeObjectURL(url);\n      };\n    } catch (err) {\n      console.error('Error reading file:', err);\n      setSrc(null);\n    }\n  }, [path]);\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\n      <MediaMenuBar />\n      {src ? (\n        <video\n          ref={videoRef}\n          src={src}\n          controls\n          autoPlay\n          style={{ flexGrow: 1, width: '100%', background: 'black' }}\n        />\n      ) : (\n        <div style={{ padding: 10 }}>Could not load video file.</div>\n      )}\n    </div>\n  );\n};\n","import React from 'react';\nimport icon from './assets/media.png'; // usa cualquier ícono tipo play o video\nimport { Program } from '../../Program.interface';\nimport { BFSRequire } from 'browserfs';\nimport { MediaPlayerWindow } from './MediaPlayerWindow';\n\nexport const MediaPlayerApp: Program = async function (args) {\n  const [path = '/C:/example.mp4'] = args;\n  const nodePath = BFSRequire('path');\n  const fileName = nodePath.basename(path);\n\n  const windowSize = {\n    width: Math.min(window.innerWidth, 480),\n    height: Math.min(window.innerHeight, 360),\n  };\n\n  this.os.windowManager.create({\n    title: `${fileName || 'Untitled'} - ${MediaPlayerApp.metadata.name}`,\n    icon: MediaPlayerApp.metadata.icon,\n    rect: {\n      left: Math.max(0, window.innerWidth * 0.3 - windowSize.width / 2),\n      top: Math.max(0, window.innerHeight * 0.3 - windowSize.height / 2),\n      ...windowSize,\n    },\n    minSize: {\n      width: 200,\n      height: 150,\n    },\n    body: <MediaPlayerWindow path={path} />,\n  });\n};\n\nMediaPlayerApp.metadata = {\n  name: 'Media Player',\n  icon,\n  fileExtensions: {\n    '.mp4': icon,\n    '.avi': icon,\n  },\n};\n","import { useRef } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport function useUuid(): string {\n  return useRef<string>(uuidv4()).current;\n}\n","import React, {\n  useState,\n  ReactElement,\n  DOMAttributes,\n  FC,\n  HTMLAttributes,\n} from 'react';\nimport { useUuid } from '../../misc/hooks/useUuid';\nimport { openDropdownMenu } from '../../misc/openDropdownMenu';\nimport styled from 'styled-components/macro';\nimport { MenuProps } from './MenuBarMenu';\n\nexport interface MenuBarProps extends HTMLAttributes<HTMLDivElement> {\n  children:\n    | ReactElement<MenuProps & DOMAttributes<any>>[]\n    | ReactElement<MenuProps & DOMAttributes<any>>;\n}\n\nconst MenuBarBase: FC<MenuBarProps> = ({ children, ...rest }: MenuBarProps) => {\n  const [activeMenu, setActiveMenu] = useState<string | null>(null);\n  const menuId = useUuid();\n\n  function mouseDown(id: string, e: React.MouseEvent) {\n    if (activeMenu === id) return;\n\n    setActiveMenu(id);\n    openDropdownMenu(id, e);\n  }\n\n  function mouseOver(id: string, e: React.MouseEvent) {\n    if (activeMenu !== null && activeMenu !== id) {\n      setActiveMenu(id);\n      openDropdownMenu(id, e);\n    }\n  }\n\n  function onMenuHidden(id: string) {\n    if (activeMenu === id) setActiveMenu(null);\n  }\n\n  const childrenWithProps = React.Children.map(children, child => {\n    const id = menuId + '_' + (child.props.id || child.props.label);\n\n    return React.cloneElement(child, {\n      active: activeMenu === id,\n      id,\n      onMouseDown: (e: React.MouseEvent) => mouseDown(id, e),\n      onMouseOver: (e: React.MouseEvent) => mouseOver(id, e),\n      onClick: (e: React.MouseEvent) => e.stopPropagation(),\n      onMenuHidden: () => onMenuHidden(id),\n    });\n  });\n\n  return <div {...rest}>{childrenWithProps}</div>;\n};\n\nexport const MenuBar = styled(MenuBarBase)`\n  display: flex;\n  background: #ece9d8;\n  border-bottom: 1px solid white;\n  font-family: 'Tahoma';\n  font-size: 11px;\n  flex-wrap: wrap;\n`;\n","import React from 'react';\nimport { eventManager } from 'react-contexify/lib/utils/eventManager';\nimport { DISPLAY_MENU } from 'react-contexify/lib/utils/actions';\n\nexport interface Anchor {\n  x: number;\n  y: number;\n}\n\nexport const Anchors: Readonly<{ [key: string]: Anchor }> = {\n  Center: { x: 0.5, y: 0.5 },\n  TopLeft: { x: 0, y: 0 },\n  TopRight: { x: 1, y: 0 },\n  BottomRight: { x: 1, y: 1 },\n  BottomLeft: { x: 0, y: 1 },\n};\n\nexport function openDropdownMenu(\n  id: string,\n  event: React.MouseEvent,\n  anchor: Anchor = Anchors.BottomLeft\n) {\n  const buttonRect = (event.currentTarget as Element).getBoundingClientRect();\n  event.clientX = buttonRect.left + buttonRect.width * anchor.x;\n  event.clientY = buttonRect.top + buttonRect.height * anchor.y - 1;\n\n  // we can't use contextMenu.show() as it uses nativeEvent which we can't mutate\n  eventManager.emit(DISPLAY_MENU(id), event);\n}\n","import React, { ReactNode } from 'react';\nimport { Menu } from 'react-contexify';\nimport classNames from 'classnames';\nimport styled from 'styled-components/macro';\n\nconst StyledMenuBarMenu = styled.div`\n  color: black;\n  padding: 3px 6px;\n\n  &:hover,\n  &.active {\n    background: rgb(49, 106, 197);\n    color: white;\n  }\n\n  &:not(:last-child) {\n    margin-right: 1px;\n  }\n`;\n\nexport interface MenuProps {\n  label: string;\n  id?: string;\n  active?: boolean;\n  children: ReactNode;\n  onMenuHidden?: () => void;\n}\n\nexport const MenuBarMenu: React.FC<MenuProps> = ({\n  active,\n  label,\n  id,\n  children,\n  onMenuHidden,\n  ...rest\n}) => {\n  return (\n    <React.Fragment>\n      <StyledMenuBarMenu className={classNames({ active })} {...rest}>\n        {label}\n      </StyledMenuBarMenu>\n\n      <Menu id={id || label} onHidden={onMenuHidden}>\n        {children || <div />}\n      </Menu>\n    </React.Fragment>\n  );\n};\n"],"sourceRoot":""}